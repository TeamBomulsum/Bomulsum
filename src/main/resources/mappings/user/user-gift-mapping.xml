<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userGiftDAO">

<!-- 보낸 작품 정보 -->
	<select id="selectSendCode" parameterType="String" resultType="String">
		SELECT order_code_seq
		FROM gift_tb
		WHERE member_code_seq=#{memberCode}
	</select>
	
	<select id="selectSendGift" parameterType="hashmap" resultType="UserSendGiftVO">
		SELECT g.gift_seq, g.order_code_seq, g.gift_recipient_name, w.writer_brand_name,
		o.order_date, o.order_address_input, o.order_pay_price, b.b_art_code_seq, 
		b.b_art_name, b.b_art_option_count, b.b_writer_code_seq, a.art_photo
		FROM order_tb o, buy_art_tb b, writer_tb w, gift_tb g, art_tb a
		WHERE g.order_code_seq = o.order_code_seq
		AND o.order_code_seq = b.order_code_seq
		AND b.b_writer_code_seq = w.writer_code_seq
		AND a.art_code_seq = b.b_art_code_seq
		AND b.order_code_seq in
		<foreach collection="orderList" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
		ORDER BY g.order_code_seq
	</select>
	
	
	<select id="selectSendGiftCheck" parameterType="String" resultType="UserSendGiftDetailVO">
		SELECT g.gift_seq, g.order_code_seq, g.gift_recipient_name, g.gift_recipient_phone, 
		g.gift_message, w.writer_brand_name, o.order_date, o.order_address_input, 
		o.order_pay_price, o.order_payment, o.order_status, o.order_request, b.b_art_code_seq, 
		b.b_art_name, b.b_art_option_count, b.b_writer_code_seq, a.art_photo, a.art_point
		FROM order_tb o, buy_art_tb b, writer_tb w, gift_tb g, art_tb a
		WHERE g.order_code_seq = o.order_code_seq
		AND o.order_code_seq = b.order_code_seq
		AND b.b_writer_code_seq = w.writer_code_seq
		AND a.art_code_seq = b.b_art_code_seq
		AND b.order_code_seq = #{orderCode}
	</select>
	
	
	

	
	

</mapper>
