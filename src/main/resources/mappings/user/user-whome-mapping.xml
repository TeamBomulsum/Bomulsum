<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userWhomeDAO">

	<!-- 작가URL로 작가 SEQ 검색 -->
	<select id="getWriterFromUrl" parameterType="String" resultType="String">
		SELECT writer_code_seq 
		FROM writer_tb 
		WHERE writer_url = #{url_id}
	</select>
	
	
	
	<!-- 작가 정보 및 작품정보 -->
	<select id="getWriterSalesArt" parameterType="String" resultType="UserWHomeVO">
		SELECT * 
		FROM art_tb , writer_tb 
		WHERE art_tb.writer_code_seq = writer_tb .writer_code_seq
		AND
		art_sale_state = 'Y'
		AND
		art_tb.writer_code_seq = #{writerCode}		
	</select>
	
	
	
	<!-- 작가 판매중인 작품수 -->
	<select id="getSalesArtCount" parameterType="String" resultType="int">
		SELECT count(art_tb.art_name)
		FROM art_tb , writer_tb 
		WHERE art_tb.writer_code_seq = writer_tb.writer_code_seq
		AND
		art_sale_state = 'Y'
		AND
		art_tb.writer_code_seq =  #{writerCode}	
	</select>
	
	
	
	<!-- 작가 구매후기 개수 -->
	<select id="getReviewTotal" parameterType="String" resultType="int">
		SELECT count(*) 
		FROM review_tb, art_tb
		WHERE art_tb.art_code_seq = review_tb.art_code_seq
		AND
		art_tb.writer_code_seq =  #{writerCode}	
	</select>	
	
	
	
	<!-- 좋아하는 작가로 추가된 개수 -->
	<select id="getAddLikes" parameterType="String" resultType="int">
		SELECT COUNT(*) 
		FROM wishlist_tb
		WHERE wishlist_option_code = #{writerCode}	
	<!-- wishlist_option_code = 작가코드 -->
	</select>

	
	<!-- 좋아하는 작품 -->
	<select id="getLikeArt" parameterType="hashMap" resultType="String">
		SELECT w.wishlist_option_code
		FROM wishlist_tb w, art_tb a
		WHERE
		w.wishlist_option_code = a.art_code_seq
		AND
		w.member_code_seq = #{member}
		AND
		a.writer_code_seq = #{writerCode}
	</select>
	
	
</mapper>
